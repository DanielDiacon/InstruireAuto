.calendarplus-lab {
   display: flex;
   flex-direction: column;
   gap: 10px;
   min-height: calc(100svh - 24px);
   padding: 12px;
}

.calendarplus-lab__header {
   display: flex;
   align-items: center;
   justify-content: space-between;
   gap: 10px;
   background: var(--black-s);
   border-radius: 22px;
   border: 1px solid var(--bd);
   padding: 10px 12px;
}

.calendarplus-lab__title {
   h2 {
      margin: 0;
      color: var(--white-p);
      font-size: 18px;
      line-height: 1.1;
   }

   p {
      margin: 2px 0 0;
      color: var(--white-s);
      font-size: 12px;
   }
}

.calendarplus-lab__switch {
   display: inline-flex;
   gap: 6px;
   flex-wrap: wrap;
}

.calendarplus-lab__switch-btn {
   border: 1px solid var(--bd);
   background: var(--black-p);
   color: var(--white-s);
   border-radius: 14px;
   padding: 8px 10px;
   font-size: 12px;
   cursor: pointer;

   &.is-active {
      background: var(--accent-l);
      color: var(--accent-d);
      font-weight: 700;
   }
}

.calendarplus-lab__content {
   min-height: 0;
   flex: 1 1 auto;
}

.cpvgrid {
   display: flex;
   flex-direction: column;
   min-height: calc(100svh - 130px);
   background: var(--black-s);
   border-radius: 26px;
   border: 1px solid var(--bd);
   overflow: hidden;
}

.cpvgrid__toolbar {
   display: flex;
   align-items: center;
   justify-content: space-between;
   gap: 10px;
   padding: 10px;
   border-bottom: 1px solid var(--bd);
   background:
      radial-gradient(
         380px 120px at top right,
         color-mix(in srgb, var(--accent-l) 16%, transparent),
         transparent 72%
      ),
      var(--black-p);
}

.cpvgrid__toolbar-left,
.cpvgrid__toolbar-right {
   display: flex;
   align-items: center;
   gap: 8px;
   flex-wrap: wrap;
}

.cpvgrid button,
.cpvgrid input {
   border: 1px solid var(--bd);
   background: var(--black-s);
   color: var(--white-p);
   border-radius: 12px;
   padding: 7px 10px;
   font-size: 12px;
}

.cpvgrid__toolbar-right span {
   color: var(--white-s);
   font-size: 12px;
}

.cpvgrid__header {
   height: 54px;
   min-height: 54px;
   display: grid;
   grid-template-columns: 72px 1fr;
   border-bottom: 1px solid var(--bd);
   background: var(--black-p);
}

.cpvgrid__gutter-head {
   display: flex;
   align-items: center;
   justify-content: center;
   color: var(--white-s);
   font-size: 12px;
   border-right: 1px solid var(--bd);
}

.cpvgrid__header-scroll {
   position: relative;
   overflow: hidden;
}

.cpvgrid__header-track {
   display: flex;
   align-items: stretch;
   height: 100%;
}

.cpvgrid__header-cell {
   flex: 0 0 auto;
   border-right: 1px solid var(--bd);
   padding: 7px 9px;
   display: flex;
   flex-direction: column;
   justify-content: center;
   gap: 2px;

   strong {
      color: var(--white-p);
      font-size: 12px;
      line-height: 1.1;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
   }

   small {
      color: var(--white-s);
      font-size: 10px;
      line-height: 1;
      text-transform: capitalize;
   }
}

.cpvgrid__body {
   flex: 1 1 auto;
   min-height: 0;
   display: grid;
   grid-template-columns: 72px 1fr;
   overflow: hidden;
}

.cpvgrid__gutter {
   position: relative;
   border-right: 1px solid var(--bd);
   overflow: hidden;
   background: var(--black-p);
}

.cpvgrid__gutter-track {
   position: absolute;
   left: 0;
   top: 0;
   right: 0;
}

.cpvgrid__gutter-cell {
   display: flex;
   align-items: center;
   justify-content: center;
   color: var(--white-s);
   font-size: 11px;
   border-bottom: 1px dashed var(--bd);
}

.cpvgrid__grid-wrap {
   min-height: 0;
   min-width: 0;
   background: var(--black-s);
}

.cpvgrid__cell-wrap {
   border-right: 1px solid var(--bd);
   border-bottom: 1px dashed var(--bd);
}

.cpvgrid__cell {
   width: 100%;
   height: 100%;
   border: 0;
   background: transparent;
   position: relative;
   padding: 0;
   overflow: visible;
   cursor: pointer;

   &.is-covered {
      cursor: default;
      pointer-events: none;
   }

   &.is-selected-slot {
      box-shadow: inset 0 0 0 2px var(--white-p);
   }
}

.cpvgrid__slot-dot {
   width: 7px;
   height: 7px;
   border-radius: 50%;
   background: color-mix(in srgb, var(--accent-l) 70%, transparent);
   display: inline-block;
}

.cpvgrid__event {
   position: absolute;
   top: 3px;
   left: 3px;
   right: 3px;
   z-index: 2;
   border-radius: 10px;
   border: 2px solid transparent;
   display: flex;
   flex-direction: column;
   justify-content: flex-start;
   gap: 2px;
   padding: 4px 5px;
   text-align: left;
   overflow: hidden;
   box-shadow: 0 6px 18px rgba(0, 0, 0, 0.18);

   strong {
      color: var(--white-p);
      font-size: 11px;
      line-height: 1.1;
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden;
   }

   small {
      color: var(--white-s);
      font-size: 10px;
      line-height: 1.1;
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden;
   }

   &.is-selected-reservation {
      border-color: var(--white-p);
   }
}

.cpvgrid__empty {
   height: 100%;
   width: 100%;
   display: flex;
   align-items: center;
   justify-content: center;
   color: var(--white-s);
   font-size: 14px;
}

.cpvgrid__footer {
   border-top: 1px solid var(--bd);
   padding: 8px 10px;
   display: flex;
   align-items: center;
   justify-content: space-between;
   gap: 8px;
   flex-wrap: wrap;
   color: var(--white-s);
   font-size: 12px;
   background: var(--black-p);
}

@media (max-width: $tablet) {
   .calendarplus-lab {
      padding: 6px;
      min-height: calc(100svh - 12px - 80px);
   }

   .calendarplus-lab__header {
      flex-direction: column;
      align-items: stretch;
   }

   .cpvgrid {
      min-height: calc(100svh - 200px);
   }

   .cpvgrid__toolbar {
      flex-direction: column;
      align-items: stretch;
   }

   .cpvgrid__toolbar-left,
   .cpvgrid__toolbar-right {
      justify-content: flex-start;
   }
}

.cpdom {
   width: 100%;
   height: 100%;
   overflow: hidden;
}

.dayview__group-wrap.cpdom-day-group {
   content-visibility: visible !important;
   contain: layout paint !important;
   contain-intrinsic-size: auto !important;
   opacity: 1 !important;
   transform: none !important;
   transition: none !important;
   will-change: auto !important;
}

.cpdom__grid {
   display: grid;
   align-content: start;
}

.cpdom__col {
   background: var(--black-p);
   border: 0;
   border-radius: 0;
   overflow: hidden;
   display: flex;
   flex-direction: column;
   min-height: 0;
}

.cpdom__col--pad {
   opacity: 0.9;
}

.cpdom__col--gap {
   opacity: 0.45;
}

.cpdom__head {
   padding: 4px 6px;
   border-bottom: 0;
   background: var(--black-p);
   color: var(--white-p);
}

.cpdom__sub {
   color: var(--white-s);
   font-size: 10px;
   line-height: 1;
   display: block;
   white-space: nowrap;
   overflow: hidden;
   text-overflow: ellipsis;
}

.cpdom__sub--meta {
   margin-top: 2px;
   display: -webkit-box;
   -webkit-line-clamp: 2;
   -webkit-box-orient: vertical;
   white-space: normal;
   line-height: 1.15;
   max-height: 2.3em;
}

.cpdom__head-note-input {
   width: 100%;
   min-height: 44px;
   border: 0;
   border-radius: 0;
   resize: none;
   outline: none;
   background: color-mix(in srgb, var(--black-s) 88%, transparent);
   color: var(--white-p);
   font-size: 10px;
   line-height: 1.2;
   padding: 4px 6px;
   margin-top: 2px;
}

.cpdom__slots {
   display: grid;
   flex: 1 1 auto;
   min-height: 0;
}

.cpdom__slot {
   border-top: 0;
   padding: 0;
   min-height: 42px;
   position: relative;
   display: block;
   isolation: isolate;
   transition:
      background-color 0.16s ease,
      box-shadow 0.16s ease;

   &.is-blocked {
      background: var(--event-red);

      .cpdom__empty,
      .cpdom__empty--regular,
      .cpdom__empty--closing {
         background: var(--event-red);
      }
   }

   &.is-selected-slot::after {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 5;
      box-shadow: inset 0 0 0 2px var(--white-p);
   }

   &.is-range-selected::after {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 5;
      box-shadow: inset 0 0 0 2px color-mix(in srgb, var(--white-p) 82%, transparent);
   }

   &.is-draft {
      box-shadow: inset 0 0 0 1px var(--cpdom-draft-color, var(--accent-l));
   }

   &.is-draft::before {
      content: "";
      position: absolute;
      inset: 2px;
      pointer-events: none;
      z-index: 2;
      border: 1px dashed
         color-mix(
            in srgb,
            var(--cpdom-draft-color, var(--accent-l)) 86%,
            var(--white-p)
         );
      background: color-mix(
         in srgb,
         var(--cpdom-draft-color, var(--accent-l)) 18%,
         transparent
      );
      animation: cpdom-draft-pulse 0.85s ease-in-out infinite alternate;
   }
}

.cpdom__slot-body {
   min-width: 0;
   min-height: 0;
   display: flex;
   width: 100%;
   height: 100%;
   position: relative;
   z-index: 1;
}

.cpdom__empty {
   width: 100%;
   height: 100%;
   border: 0;
   border-radius: 0;
   background: transparent;
   cursor: pointer;
   display: flex;
   align-items: flex-start;
   justify-content: flex-start;
   padding: 3px 6px 0;
   text-align: left;
}

.cpdom__empty--regular {
   background: var(--event-default);
}

.cpdom__empty--closing {
   background: var(--event-red);
}

.cpdom__blocked-label {
   color: var(--white-p);
   font-size: 9px;
   line-height: 1.1;
   font-weight: 700;
   letter-spacing: 0.03em;
   margin-right: 6px;
   text-transform: uppercase;
}

.cpdom__empty--wait {
   color: var(--white-s);
}

.cpdom__empty--cancel {
   justify-content: flex-start;
}

.cpdom__slot.is-closing-slot .cpdom__time {
   color: var(--white-p);
}

.cpdom__time {
   color: var(--white-t);
   font-size: 10px;
   line-height: 1.2;
   text-align: left;
   display: block;
   width: 100%;
   white-space: nowrap;
   overflow: hidden;
   text-overflow: ellipsis;
}

.cpdom__event {
   width: 100%;
   height: 100%;
   border: 0;
   border-radius: 0;
   display: flex;
   flex-direction: column;
   text-align: left;
   gap: 1px;
   cursor: pointer;
   position: relative;
   padding: 3px 4px;
   overflow: hidden;
   transition:
      opacity 0.16s ease,
      transform 0.16s ease,
      filter 0.16s ease,
      box-shadow 0.16s ease;
   will-change: opacity, transform;

   &.is-optimistic-create {
      opacity: 0.84;
   }

   &.is-optimistic-create::after {
      content: "";
      position: absolute;
      inset: 1px;
      pointer-events: none;
      z-index: 2;
      border: 1px dashed color-mix(in srgb, var(--white-p) 74%, transparent);
      background: color-mix(in srgb, var(--black-p) 36%, transparent);
      animation: cpdom-preview-pulse 0.8s ease-in-out infinite alternate;
   }

   &.is-deleting {
      opacity: 0.28;
      transform: scale(0.98);
      filter: saturate(0.35);
      pointer-events: none;
   }

   &.is-deleting::after {
      content: "";
      position: absolute;
      inset: 1px;
      pointer-events: none;
      z-index: 2;
      border: 1px dashed color-mix(in srgb, var(--white-s) 76%, transparent);
      background: color-mix(in srgb, var(--black-p) 45%, transparent);
   }

   &.is-selected-event {
      box-shadow: inset 0 0 0 2px var(--white-p);
   }

   &.is-active-event {
      box-shadow: inset 0 0 0 2px var(--white-p);
   }

   &.is-search-event {
      box-shadow: inset 0 0 0 2px color-mix(in srgb, var(--blue-l) 70%, transparent);
   }

   &.is-cancel-origin {
      color: var(--white-p);

      .cpdom__event-meta,
      .dayview__event-person-name,
      .dayview__event-phone,
      .dayview__event-note {
         color: var(--white-p);
      }
   }
}

@keyframes cpdom-draft-pulse {
   from {
      opacity: 0.45;
   }
   to {
      opacity: 0.88;
   }
}

@keyframes cpdom-preview-pulse {
   from {
      opacity: 0.34;
   }
   to {
      opacity: 0.84;
   }
}

.cpdom__event .dayview__event-person-name,
.cpdom__event .dayview__event-phone,
.cpdom__event .dayview__event-note {
   display: -webkit-box;
   -webkit-box-orient: vertical;
   overflow: hidden;
   text-overflow: ellipsis;
   white-space: normal;
   overflow-wrap: anywhere;
   word-break: break-word;
   line-height: 1.1;
}

.cpdom__event .dayview__event-person-name {
   color: var(--white-p);
   font-size: 10px;
   -webkit-line-clamp: 2;
}

.cpdom__event .dayview__event-phone {
   color: var(--white-s);
   font-size: 9px;
   -webkit-line-clamp: 1;
}

.cpdom__event .dayview__event-note {
   color: var(--white-s);
   font-size: 9px;
   -webkit-line-clamp: 2;
}

.cpdom__event-meta {
   color: var(--white-s);
   font-size: 9px;
   line-height: 1.1;
   white-space: nowrap;
   overflow: hidden;
   text-overflow: ellipsis;
   margin-bottom: 1px;
}

.cpdom__event-meta--cancel-origin {
   margin-bottom: 0;
}

.cpdom__wait-input {
   width: 100%;
   height: 100%;
   border: 0;
   border-radius: 0;
   resize: none;
   outline: none;
   background: color-mix(in srgb, var(--black-s) 88%, transparent);
   color: var(--white-p);
   font-size: 10px;
   line-height: 1.2;
   padding: 4px 6px;
}

.cpdom__head--botanica {
   background: var(--event-pink);
}

.cpdom__head--ciocana {
   background: var(--event-blue);
}

.cpdom__head--buiucani {
   background: var(--event-green);
}

.cpdom__head--other {
   background: var(--event-red);
}

.cpdom__head--pad,
.cpdom__head--gap {
   background: var(--black-p);
}

.cpdom__presence {
   position: absolute;
   right: 4px;
   top: 4px;
   width: 8px;
   height: 8px;
   border-radius: 50%;
   border: 1px solid var(--white-p);
   box-shadow: 0 0 0 1px color-mix(in srgb, var(--black-p) 55%, transparent);
   z-index: 3;
   pointer-events: none;
}

.cpdom__range-box {
   position: absolute;
   pointer-events: none;
   border: 1px dashed var(--white-p);
   background: color-mix(in srgb, var(--white-p) 16%, transparent);
   box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--white-p) 18%, transparent);
   z-index: 50;
}

.dv-pan.is-panning .dayview__track,
.dv-pan.is-panning .dayview__track * {
   pointer-events: none !important;
}
