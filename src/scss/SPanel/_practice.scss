/* ===== Practice (dark, fără var() ) ===== */
.test.page {
   padding: 20px;
   display: flex;
   flex-direction: column;
   gap: 20px;
}

.practice {
   background: var(--black-s);
   border-radius: 35px;
   padding: 16px;
   position: relative;
   overflow: hidden;
   &.exam {
      min-height: calc(100vh - 48px);
      //      &::after {
      //         content: "";
      //         position: absolute;
      //         bottom: -180%;
      //         left: 50%;
      //         transform: translateX(-50%);
      //         width: 300%;
      //         height: 300%;
      //         background: radial-gradient(
      //            circle,
      //            transparent,
      //            transparent,
      //            rgba(243, 252, 121, 0.2),
      //            transparent,
      //            transparent,
      //            transparent,
      //            transparent
      //         );
      //
      //         filter: blur(10px);
      //         pointer-events: none;
      //         z-index: 0;
      //      }
   }
   &__header {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-bottom: 14px;
      padding: 6px 6px 0 6px;
      &.tikets-header {
         display: flex;
         padding: 0;
         flex-direction: row;
         h2 {
            padding: 6px 6px 0 6px;
         }
      }
      h2 {
         font-size: 32px;
         line-height: 1;
         color: var(--white-p);
         font-family: "Clash Display";
         font-weight: 500;
         position: relative;
         z-index: 2;
         flex-shrink: 0;
         white-space: nowrap;
      }
   }

   &__error {
      padding: 10px 12px;
      border-radius: 14px;
      color: #ff6b6b;
   }

   &__grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 6px;
   }
   &__input {
      padding: 14px 16px;
      border-radius: 16px;
      background: var(--black-p);
      color: var(--white-p);
      width: 172px;
      min-width: none;
   }
   &__ticket {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 22px;
      background: var(--black-p);
      color: var(--white-p);
      cursor: pointer;
      transition: var(--elastic-s);
      padding: 28px;
      &--ok {
         background: #9cf680 !important;
         color: #0d3700 !important;
      }
      &--bad {
         background: #f68080 !important;
         color: #410000 !important;
      }

      &:hover {
         padding: 29px;
         margin: -1px;
         border-radius: 16px;
      }
      &:active {
         scale: 0.95;
         border-radius: 22px;
      }
      &:focus-visible {
         outline: 2px solid var(--accent-l);
         outline-offset: 2px;
      }

      &--disabled,
      &:disabled {
         opacity: 0.45;
         cursor: not-allowed;
         transform: none;
      }

      .practice__ticket-title {
         position: relative;
         z-index: 1;
      }
   }

   /* — Toolbar — */
   &__toolbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 12px;
      position: relative;
      z-index: 30;
   }

   &__back {
      background: var(--black-p);
      color: var(--white-p);
      cursor: pointer;
      transition: background 0.12s ease, border-color 0.12s ease,
         transform 0.06s ease;

      border-radius: 25px;
      padding: 14px 20px;
      transition: var(--classic-s);
      position: relative;
      &.green {
         background: #9cf680 !important;
         color: #0d3700 !important;
      }
      &.yellow {
         background: var(--accent-l);
         color: var(--accent-d);
      }
      &.toggle:first-child {
         border-radius: 25px 16px 16px 25px;
      }
      &.toggle:last-child {
         border-radius: 16px 25px 25px 16px;
      }
      &.toggle:first-child:hover,
      &.toggle:last-child:hover,
      &:hover {
         transition: all var(--elastic-s), background var(--classic-s);
         border-radius: 16px;
         padding: 14px 22px;
      }
      &.toggle:first-child:active,
      &.toggle:last-child:active,
      &:active {
         transition: all var(--elastic-s), background var(--classic-s);
         transform: scale(0.95);
         padding: 14px 20px;
         border-radius: 32px;
      }
   }

   &__timer {
      font-variant-numeric: tabular-nums;
      background: var(--black-p);
      color: var(--white-p);
      cursor: pointer;
      transition: background 0.12s ease, border-color 0.12s ease,
         transform 0.06s ease;
      border-radius: 25px;
      padding: 14px 20px;
      transition: var(--classic-s);
      position: relative;
      font-variant-numeric: tabular-nums;
      font-feature-settings: "tnum" 1, "lnum" 1;
   }
   /* — Status-board 2×12 — */
   &__statusboard {
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      margin-bottom: 12px;
      gap: 6px;
      position: relative;
      z-index: 30;
   }

   &__dot {
      background: var(--black-p);
      color: var(--white-p);
      cursor: pointer;
      transition: background 0.12s ease, border-color 0.12s ease,
         transform 0.06s ease;
      border-radius: 25px;
      padding: 14px 20px;
      transition: var(--classic-s);
      position: relative;
      &:hover {
         transition: all var(--elastic-s), background var(--classic-s);
         border-radius: 16px;
         padding: 14px 22px;
      }
      &:active {
         transition: all var(--elastic-s), background var(--classic-s);
         transform: scale(0.95);
         padding: 14px 20px;
         border-radius: 32px;
      }
      &--current {
         background: #80d1f6;
         color: #002c41;
      }
      &--ok {
         background: #9cf680;
         color: #0d3700;
      }
      &--bad {
         background: #f68080;
         color: #410000;
      }

      &--none {
         /* implicit */
      }
   }

   /* — Card întrebare — */
   &__question {
      position: relative;
      z-index: 30;
   }
   &__row {
      display: grid;
      grid-template-columns: 2fr 3fr;
      gap: 12px;
   }

   &__qtext {
      color: var(--white-p);
      padding: 8px;
   }
   &__qimage-wrapper {
      text-align: center;
      background: var(--black-p);
      border-radius: 16px;
      overflow: hidden;
      order: 1;
      aspect-ratio: 1.36;
      &.mobile {
         display: none;
      }
   }

   &__qimage {
      user-select: none;
      --bleed: 4px;

      display: block;
      width: calc(100% + (var(--bleed) * 2));
      max-width: none;
      height: auto;
      margin-bottom: -8px;

      transform: translate(calc(var(--bleed) * -1), calc(var(--bleed) * -1));
      // fără border-radius aici; îl are wrapperul
   }

   /* — Răspunsuri — */
   &__answers {
      display: flex;
      flex-direction: column;
      gap: 6px;
      user-select: none;
      order: 2;
   }

   &__answer {
      background: var(--black-p);
      color: var(--white-p);
      cursor: pointer;
      border-radius: 16px;
      padding: 14px 16px;
      transition: var(--classic-s);
      position: relative;
      border: 1px solid transparent;
      text-align: left;
      &:hover {
         transition: all var(--elastic-s), background var(--classic-s);
         border-radius: 12px;
         opacity: 0.9;
      }
      &--correct {
         background: #9cf680;
         color: #0d3700;
      }

      &--wrong-selected {
         background: #f68080;
         color: #410000;
      }
   }

   /* — Actions — */
   &__actions {
      display: flex;
      align-items: center;
      margin-top: 12px;
      gap: 10px;
   }
   &__spacer {
      flex: 1 1 auto;
   }

   &__secondary {
      background: #9cf680;
      color: #0d3700;
      cursor: pointer;
      transition: background 0.12s ease, border-color 0.12s ease,
         transform 0.06s ease;

      border-radius: 25px;
      padding: 14px 20px;
      transition: var(--classic-s);
      position: relative;
      &:hover {
         transition: all var(--elastic-s), background var(--classic-s);
         border-radius: 16px;
         padding: 14px 22px;
      }
      &:active {
         transition: all var(--elastic-s), background var(--classic-s);
         transform: scale(0.95);
         padding: 14px 20px;
         border-radius: 32px;
      }
      &:focus-visible {
         outline: 2px solid var();
         outline-offset: 2px;
      }
   }

   /* — Done — */
   &__done {
      text-align: center;
      border: 1px solid #242938;
      background: #12141a;
      border-radius: 14px;
      padding: 18px;
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.24);

      h3 {
         margin-top: 0;
         color: #f6f8ff;
      }
      p {
         color: #9aa3b2;
      }
   }
   &__ticket {
      position: relative;
   }
   &__ticket-badge {
      position: absolute;
      right: 10px;
      top: 10px;
      padding: 6px 10px;
      border-radius: 9999px;
      font-size: 12px;
      font-weight: 700;
      border: 1px solid #2a3146;
      background: #0f1117;
      color: #cfd3dc;
   }

   /* Pills în toolbar (deja din răspunsul anterior) */
   &__toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      margin-bottom: 14px;
   }
   &__toolbar-center {
      display: flex;
      align-items: center;
      gap: 6px;
   }
   &__question-index {
      background: var(--black-p);
      color: var(--white-p);
      cursor: pointer;
      transition: background 0.12s ease, border-color 0.12s ease,
         transform 0.06s ease;
      border-radius: 25px;
      padding: 10px 14px;
      transition: var(--classic-s);
      position: relative;
   }
   &__summary {
      display: flex;
      align-items: center;
      gap: 8px;
   }
   &__summary-pill {
      cursor: pointer;
      transition: background 0.12s ease, border-color 0.12s ease,
         transform 0.06s ease;
      border-radius: 25px;
      padding: 10px 14px;
      transition: var(--classic-s);
      position: relative;
      &--ok {
         background: #9cf680;
         color: #0d3700;
      }
      &--bad {
         background: #f68080;
         color: #410000;
      }
   }

   /* Buton de finalizare */
   &__secondary--primary {
      background: #80d1f6;
      color: #002c41;
   }
   &__secondary--primary:hover {
      background: #80d1f6;
      color: #002c41;
   }
   &__icon {
      &.rotate45 {
         padding: 1.5px;
         svg {
            rotate: 45deg;
         }
      }
   }
   /* — Mobile — */
} /* Ticket badges (verde/galben/roșu) pe card */

.practice__cat-list {
   display: flex;
   flex-direction: column;
   gap: 6px;
}

.practice__cat-item {
   width: 100%;
   display: flex;
   justify-content: space-between;
   align-items: center;
   gap: 12px;
   border: 0;
   cursor: pointer;
   text-align: left;
   padding: 16px 18px;
   border-radius: 22px;
   background: var(--black-p);
}

.practice__cat-left {
   display: flex;
   flex-direction: column;
   gap: 4px;
}
.practice__cat-title {
   font-size: 16px;
   color: var(--white-p);
   font-weight: 600;
}
.practice__cat-sub {
   color: var(--white-p);
   font-size: 12px;
   opacity: 0.65;
}

.practice__cat-badge {
   font-weight: 500;
   white-space: nowrap;
   display: flex;
   align-items: center;
   justify-content: center;
   gap: 6px;
   padding: 9px 12px;
   border-radius: 99px;
   &--ok {
      color: #0d3700;
      background: #9cf680;
   }
   &--bad {
      color: hsl(0, 100%, 13%);
      background: hsl(0, 87%, 73%);
   }
   &--none {
      background: var(--black-s);
      color: var(--white-p);
   }
}

.practice__cat-empty {
   padding: 16px;
   opacity: 0.7;
}

.lives {
   &__pill {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 9px 12px;
      border-radius: 99px;
      background: var(--accent-l);
      background: var(--black-p);
   }
   &__icon {
      width: 21.5px;
      height: 21.5px;
      display: block;
      color: #f68080;
      div {
         display: flex;
         align-items: center;
         justify-content: center;
         width: 21.5px;
         height: 21.5px;
      }
      svg {
         width: 21.5px;
         height: 21.5px;
      }
      &.rezult {
         width: 15vw;
         height: 15vw;
         z-index: 30;
         opacity: 1;
         div {
            width: 15vw;
            height: 15vw;
         }
         svg {
            width: 15vw;
            height: 15vw;
         }
      }
      &.rezult:first-child {
         transform: rotate(-15deg) scale(0.9);
      }
      &.rezult:last-child {
         transform: rotate(15deg) scale(0.9);
      }
   }
}

@media only screen and (max-width: $mobile) {
   .test.page {
      padding: 6px;
      gap: 6px;
   }
   .practice {
      &.exam {
         min-height: calc(100vh - 110px);
      }
      &__grid {
         grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
      }

      &__ticket {
         font-size: 12px;
         padding: 12px 16px;
         &:hover {
            padding: 13px 17px;
            margin: -1px;
            border-radius: 16px;
         }
         &:active {
            scale: 0.95;
            padding: 12px 16px;
         }
      }
      &__toolbar {
         justify-content: space-between;
         gap: 6px;
         flex-wrap: wrap;
         margin-bottom: 6px;
      }
      &__back {
         order: 1;
         padding: 10px 14px;

         &:hover {
            padding: 10px 16px;
         }
         &:active {
            padding: 10px 20px;
         }
      }
      &__back.bottom {
         order: 0;
         padding: 14px 20px;
         &:hover {
            padding: 14px 22px;
         }
         &:active {
            padding: 14px 20px;
         }
      }
      &__timer {
         order: 2;
         padding: 10px 14px;
      }
      &__qimage-wrapper {
         display: none;

         &.mobile {
            display: block;
         }
      }
      &__toolbar-center {
         order: 3;
         width: 100%;
         justify-content: center; // centrare pe lățime
         text-align: center;
         gap: 6px;
         flex-wrap: wrap;
      }

      /* (opțional) micșorează puțin pastilele pe mobil */
      &__summary-pill,
      &__question-index {
         font-size: 12px;
         padding: 8px 12px;
      }
      &__question-index {
         margin-right: auto;
      }
      &__statusboard {
         display: grid;
         grid-template-columns: repeat(8, 1fr) !important;
         gap: 3px !important;
         margin-bottom: 0px !important;
      }
      &__dot {
         padding: 8px 12px;
         border-radius: 8px;
         &:nth-child(1) {
            border-radius: 16px 8px 8px 8px;
         }
         &:nth-child(8) {
            border-radius: 8px 16px 8px 8px;
         }
         &:nth-child(17) {
            border-radius: 8px 8px 8px 16px;
         }
         &:nth-child(24) {
            border-radius: 8px 8px 16px 8px;
         }
         &:hover {
            transition: all var(--elastic-s), background var(--classic-s);
            border-radius: 16px;
            padding: 8px 12px;
         }
         &:active {
            transition: all var(--elastic-s), background var(--classic-s);
            transform: scale(0.95);
            padding: 8px 12px;
            border-radius: 32px;
         }
      }
      &__row {
         grid-template-columns: repeat(1, 1fr);
      }
   }
   .lives {
      &__pill {
         padding: 7px 12px;
      }
      &__icon {
         width: 18px;
         height: 18px;
         div {
            width: 18px;
            height: 18px;
         }
         svg {
            width: 18px;
            height: 18px;
         }
      }
   }
}
.practice-stats {
   background: var(--black-s);
   border-radius: 35px;
   padding: 16px;
   position: relative;

   &__head {
      display: flex;
      align-items: center;
      gap: 6px;
      margin-bottom: 14px;
      padding: 6px 6px 0 6px;
      h2 {
         font-size: 32px;
         line-height: 1;
         color: var(--white-p);
         font-family: "Clash Display";
         font-weight: 500;
         position: relative;
         z-index: 2;
         flex-shrink: 0;
         white-space: nowrap;
      }
   }

   &__section {
   }

   &__table {
      border-radius: 16px;
      background: var(--black-p);
   }

   &__col {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr 1fr;
      gap: 8px;
      padding: 8px 10px;
   }
   &__item {
      display: flex;
      flex-direction: column;
      gap: 3px;
      p {
         color: var(--white-p);
      }
      span {
         color: var(--white-t);
      }
   }

   // bara de jos
   &__bar {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 6px;
   }

   &__bar-inner {
      display: flex;
      height: 32px;
      overflow: hidden;
   }

   &__bar-seg {
      height: 100%;
      transition: width 800ms 800ms cubic-bezier(0.2, 0.8, 0.2, 1);
   }
   &__bar-seg--ok {
      background: #86eb67;
      margin-right: 3px;
      border-radius: 16px 8px 8px 16px;
   }
   &__bar-seg--bad {
      border-radius: 100px;
      background: #f68080;
      margin-right: 3px;
      border-radius: 8px;
   }
   &__bar-seg--skip {
      background: var(--black-p);
      border-radius: 8px 16px 16px 8px;
   }

   &__bar-legend {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
   }
   @media (max-width: 720px) {
   }
}

@media only screen and (max-width: $mobile) {
   .practice-stats {
      &__table {
         border-radius: 16px;
         background: transparent;
      }

      &__col {
         display: grid;
         grid-template-columns: 1fr 1fr;
         grid-template-rows: 1fr 1fr;
         gap: 6px;
         padding: 0;
      }
      &__item {
         display: flex;
         flex-direction: column;
         background: var(--black-p);
         border-radius: 16px;
         padding: 8px 10px;
         gap: 3px;
      }
   }
}

.practice__qtext {
   scroll-margin-top: 0;
}
/* ========== COMPLETĂRI LIPSĂ (dark, fără var()) ========== */
.practice {
   overflow: hidden;
   position: relative;
   display: flex;
   flex-direction: column;
   z-index: 1;

   > .card.top {
      margin-bottom: 12px;
      padding: 8px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      align-items: center;
      justify-content: center;
      flex: 1 1 0;
      min-height: 400px;

      h2 {
         font-size: 32px;
         line-height: 1;
         color: var(--white-p);
         font-family: "Clash Display";
         font-weight: 500;
         position: relative;
         z-index: 2;
         flex-shrink: 0;
         text-align: center;
         white-space: nowrap;
      }
      p {
         color: var(--white-s);
         text-align: center;
      }
   }
   .card {
      position: relative;
      z-index: 30;
   }
   > .card:first-of-type {
      > div {
         display: flex;
         gap: 12px;
         align-items: center;
         flex-wrap: wrap;

         > button:last-child {
            margin-left: auto;
         }

         > div:nth-child(2) {
            font-size: 12px;
            opacity: 0.8;
         }
      }
   }

   /* cardul de istoric */
   .card {
      h4 {
         font-size: 20px;
         padding: 4px;
      }
      > p {
         opacity: 0.8;
      } /* loading / empty */
      p {
         color: inherit;
      } /* opțional: păstrează culoarea */
   }

   /* istoric încercări */
   &__history {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      @media only screen and (max-width: $mobile) {
         grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      }
      gap: 6px;
      &-item {
         display: flex;
         flex-direction: column;
         background: var(--black-p);
         border-radius: 16px;
         padding: 8px 10px;
         gap: 3px;
         > div:first-child {
            > div:first-child {
               /* status */
               font-weight: 600;
               text-transform: capitalize;
            }
            > div:nth-child(2) {
               /* dată/perioadă */
               font-size: 12px;
               opacity: 0.8;
            }
         }

         > div:last-child {
            text-align: right;

            > div:first-child {
               /* scor */
               font-weight: 600;
            }
            > div:last-child {
               /* total întrebări */
               font-size: 12px;
               opacity: 0.8;
            }
         }

         &--finished,
         &--completed {
            background: #9cf680;
            color: #0d3700;
         }
         &--in_progress,
         &--inprogress,
         &--running {
            background: #80d1f6;
            color: #002c41;
         }
         &--failed,
         &--error {
            background: #f68080;
            color: #410000;
         }
      }
   }

   /* blocul de rezultat + rândul cu butoane */
   &__done {
      margin-top: 16px;

      > div {
         display: flex;
         gap: 8px;
         justify-content: center;
      }
   }

   /* răspuns – stări lipsă */
   &__answer {
      &--locked {
         cursor: default;
         opacity: 0.9;
      }
      &--loading {
         position: relative;
         pointer-events: none;
         opacity: 0.7;

         &::before {
            content: "";
            position: absolute;
            top: 10px;
            right: 12px;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            border: 2px solid rgba(207, 211, 220, 0.35);
            border-top-color: #cfd3dc;
            animation: spinSmall 0.8s linear infinite;
         }
      }
   }

   /* focus rings */
   &__secondary {
      &:focus-visible {
         outline: 2px solid rgba(13, 55, 0, 0.6);
         outline-offset: 2px;
      }
   }
   &__secondary--primary {
      &:focus-visible {
         outline: 2px solid rgba(0, 44, 65, 0.6);
         outline-offset: 2px;
      }
   }
   &__back:focus-visible,
   &__timer:focus-visible,
   &__question-index:focus-visible,
   &__dot:focus-visible {
      outline: 2px solid rgba(128, 209, 246, 0.65);
      outline-offset: 2px;
   }

   /* utilitare mici */
   &__spacer {
      flex: 1 1 auto;
   }
}

/* === utilitare globale folosite în markup (fără clase noi) === */
.card {
   color: var(--white-p);
}

.button {
   background: #0f1117;
   color: #cfd3dc;
   border: 1px solid #2a3146;
   border-radius: 25px;
   padding: 12px 16px;
   transition: all 0.15s ease;

   &:hover {
      background: #121722;
   }
   &:active {
      transform: scale(0.97);
   }

   @media (max-width: 720px) {
      padding: 10px 14px;
   }
}
.practice__answer--correct {
   background: #9cf680;
   color: #0d3700;
}
.practice__answer--wrong-selected {
   background: #f68080;
   color: #410000;
}
.idnp-block__boxes {
   display: flex !important;
   gap: 3px !important;
   align-items: center !important;
   justify-content: center !important;
}
.idnp-box {
   width: 30px !important;
   min-width: none;
   border-radius: 8px;
   padding: 10px;
   border: none;
   background: var(--white-p);
   margin: 0;
}
